<<<<<<< HEAD
jQuery(window).load(function(){if("undefined"!=typeof ol){function e(e){return eventpost_params.maptiles[e].urls_retina&&ep_retina}function t(e,t){jQuery(ep_pop_elements[e]).hide(0),view=ep_maps[e].getView();var a=t.getGeometry().getCoordinates();view.animate({duration:1e3,center:a});ep_popups[e].setPosition(a),html_output='<a href="'+t.get("link")+'">'+(""!==t.get("thumbnail")&&void 0!==t.get("thumbnail")?'<img src="'+t.get("thumbnail")+'">':"")+"<strong>"+t.get("name")+"</strong><br><time>"+t.get("date")+"</time><br><address>"+t.get("address")+"</address>"+(""!==t.get("desc")&&void 0!==t.get("desc")?"<p>"+t.get("desc")+"</p>":"")+"</a>",jQuery(ep_pop_elements[e]).delay(500).html(html_output).show(500)}ep_maps=[],ep_vectorSources=[],ep_pop_elements=[],ep_popups=[],ep_features=[],ep_icons=[],ep_proj_source=new ol.proj.Projection({code:"EPSG:4326"}),ep_proj_destination=new ol.proj.Projection({code:"EPSG:900913"}),ep_interactions=eventpost_params.map_interactions,ep_retina=window.retina||window.devicePixelRatio>1.5,jQuery("a.event_link.gps").click(function(){if(void 0!==jQuery(this).parent().data("latitude")&&void 0!==jQuery(this).parent().data("longitude")){var t=jQuery(this).parent().data("latitude"),a=jQuery(this).parent().data("longitude"),r=jQuery(this).parent().data("marker"),s="event_map"+jQuery(this).parent().data("id"),o=new ol.proj.transform([a,t],ep_proj_source,ep_proj_destination);if(0===jQuery("#"+s).length){jQuery(this).parent().append('<div id="'+s+'-wrap"><div id="'+s+'" class="event_map"></div></div>'),jQuery("#"+s+"-wrap").css({height:"400px",margin:"auto",clear:"both"}).animate({height:"toggle"},1),ep_vectorSources[s]=new ol.source.Vector,ep_maps[s]=new ol.Map({target:s,layers:[new ol.layer.Tile({source:new ol.source.XYZ({urls:e(eventpost_params.defaulttile)?eventpost_params.maptiles[eventpost_params.defaulttile].urls_retina:eventpost_params.maptiles[eventpost_params.defaulttile].urls,tilePixelRatio:e(eventpost_params.defaulttile)?2:1,attribution:eventpost_params.maptiles[eventpost_params.defaulttile].attribution})}),new ol.layer.Vector({source:ep_vectorSources[s]})],view:new ol.View({center:o,zoom:eventpost_params.zoom})}),ep_maps[s].addControl(new ol.control.Zoom);var i=new ol.Feature({geometry:new ol.geom.Point(o)});void 0===ep_icons[r]&&(ep_icons[r]=new ol.style.Style({image:new ol.style.Icon({anchor:[16,32],anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:1,src:r})})),i.setStyle(ep_icons[r]),ep_vectorSources[s].addFeature(i)}return jQuery("#"+s+"-wrap").animate({height:"toggle"},1e3,function(){ep_maps[s].getView().setCenter(o)}),!1}}),jQuery(".event_geolist").each(function(){var a=jQuery(this).attr("id"),r="event_map_all"+a,s=jQuery(this).data("width"),o=jQuery(this).data("height"),i=jQuery(this).data("zoom"),n=jQuery(this).data("tile");""===n&&(n=eventpost_params.defaulttile);var p=jQuery(this).data("disabled-interactions"),l='<div id="'+r+'" class="event_map map"></div><div id="'+r+'-popup" class="event_map_popup"></div>';jQuery(this).addClass("event_geolist_parsed");var d=!1;jQuery(this).hasClass("has-list")&&(d=jQuery(this).data("list"),jQuery(".event_item",jQuery(this)).wrapAll('<div class="eventpost-item-list">'),jQuery(".eventpost-item-list a",jQuery(this)).click(function(e){return e.preventDefault(),feature_selector=a+"-"+jQuery(this).parents(".event_item").first().data("id"),console.log(feature_selector),"undefined"!==ep_features[feature_selector]&&t(r,ep_features[feature_selector]),!1})),"below"===d||"right"===d?jQuery(this).prepend(l):jQuery(this).append(l),css={margin:"auto",clear:"both"},"auto"!==s&&(css.width=s),"auto"!==o&&(css.height=o),"left"!==d&&"right"!==d||(css.width="70%"),"above"!==d&&"below"!==d||jQuery(this).css({height:"auto"}),jQuery("#"+r).css(css),ep_vectorSources[r]=new ol.source.Vector,ep_pop_elements[r]=document.getElementById(r+"-popup"),ep_popups[r]=new ol.Overlay({element:ep_pop_elements[r],positioning:"bottom-center",stopEvent:!1}),map_settings={target:r,layers:[new ol.layer.Tile({source:new ol.source.XYZ({urls:e(n)?eventpost_params.maptiles[n].urls_retina:eventpost_params.maptiles[n].urls,tilePixelRatio:e(n)?2:1,attribution:eventpost_params.maptiles[n].attribution})}),new ol.layer.Vector({source:ep_vectorSources[r]})],view:new ol.View({center:[0,0],zoom:isNaN(i)?12:i,maxZoom:18}),overlays:[ep_popups[r]]},ep_maps[r]=new ol.Map(map_settings),ep_maps[r].addControl(new ol.control.ZoomSlider),ep_maps[r].on("click",function(e){var a=ep_maps[r].forEachFeatureAtPixel(e.pixel,function(e,t){return e});a?t(r,a):jQuery(ep_pop_elements[r]).hide(200)});var u,c=0;for(u in jQuery(this).find("address").each(function(){c++;var e=parseFloat(jQuery(this).data("latitude")),t=parseFloat(jQuery(this).data("longitude"));if(jQuery(this).parents(".event_item").first().data("id",c),void 0!==e&&void 0!==t){var s=jQuery(this).parent().parent(),o=jQuery(this).data("marker");jQuery(this).data("id");coords=new ol.proj.transform([t,e],ep_proj_source,ep_proj_destination),obj={geometry:new ol.geom.Point(coords),name:s.find("h5").text(),address:jQuery(this).html(),date:s.find("time").text(),link:s.find("a").attr("href"),desc:s.find(".event_exerpt").html()},s.find("img").length>0&&(obj.thumbnail=s.find("img").attr("src"));var i=a+"-"+c;ep_features[i]=new ol.Feature(obj),void 0===ep_icons[o]&&(ep_icons[o]=new ol.style.Style({image:new ol.style.Icon({anchor:[16,32],anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:1,src:o})})),ep_features[i].setStyle(ep_icons[o]),ep_vectorSources[r].addFeature(ep_features[i])}}),ep_maps[r].getView().fit(ep_vectorSources[r].getExtent(),ep_maps[r].getSize()),!isNaN(i)&&""!==i&&i>0&&ep_maps[r].getView().setZoom(i),m_i=0,ep_interactions)p.indexOf(u+",")>-1&&ep_maps[r].getInteractions().getArray()[m_i].setActive(!1),m_i++})}else jQuery(".event_geolist").hide();jQuery(".eventpost_calendar").each(function(){var e=jQuery(this);e.html('<img src="'+eventpost_params.imgpath+'cal-loader.gif" class="eventpost_cal_loader"/>'),jQuery.get(eventpost_params.ajaxurl,{action:"EventPostCalendar",date:jQuery(this).data("date"),cat:jQuery(this).data("cat"),mf:jQuery(this).data("mf"),dp:jQuery(this).data("dp"),color:jQuery(this).data("color"),display_title:jQuery(this).data("title"),thumbnail:jQuery(this).data("thumbnail"),tax_name:jQuery(this).data("tax_name"),tax_term:jQuery(this).data("tax_term")},function(t){e.html(t),function e(){jQuery(".eventpost_calendar table td h4").each(function(){event_datas=jQuery(this).next(".event_data"),jQuery(this).css({borderColor:event_datas.css("border-left-color"),color:event_datas.css("border-left-color"),backgroundColor:event_datas.css("background-color")})}),jQuery(".eventpost_cal_bt").click(function(){var t=jQuery(this).parents(".eventpost_calendar");jQuery.get(eventpost_params.ajaxurl,{action:"EventPostCalendar",date:jQuery(this).data("date"),cat:t.data("cat"),mf:t.data("mf"),dp:t.data("dp"),color:t.data("color"),display_title:t.data("title"),thumbnail:t.data("thumbnail"),tax_name:t.data("tax_name"),tax_term:t.data("tax_term")},function(a){t.html(a),e()})}),jQuery(".eventpost_cal_link").click(function(){var e=jQuery(this).parents(".eventpost_calendar");jQuery(".eventpost_cal_list",e).fadeOut(function(){jQuery(this).remove()}),jQuery.get(eventpost_params.ajaxurl,{action:"EventPostCalendarDate",date:jQuery(this).data("date"),cat:e.data("cat"),mf:e.data("mf"),dp:e.data("dp"),color:e.data("color"),display_title:e.data("title"),thumbnail:e.data("thumbnail"),tax_name:e.data("tax_name"),tax_term:e.data("tax_term")},function(t){e.append('<div class="eventpost_cal_list"><button class="eventpost_cal_close">x</button>'+t+"</div>"),e.find(".eventpost_cal_list").hide(1).fadeIn(500),e.find(".eventpost_cal_close").click(function(){jQuery(this).parent().hide(500).remove()})})})}()})})});
=======
this.eventpost=this.eventpost||{},this.eventpost.eventpost=function(e){function t(r){if(a[r])return a[r].exports;var o=a[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}({12:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(13);a.n(r);jQuery(window).load(function(){function e(){jQuery(".eventpost_calendar table td h4").each(function(){event_datas=jQuery(this).next(".event_data"),jQuery(this).css({borderColor:event_datas.css("border-left-color"),color:event_datas.css("border-left-color"),backgroundColor:event_datas.css("background-color")})}),jQuery(".eventpost_cal_bt").click(function(){var t=jQuery(this).parents(".eventpost_calendar");jQuery.get(eventpost_params.ajaxurl,{action:"EventPostCalendar",date:jQuery(this).data("date"),cat:t.data("cat"),mf:t.data("mf"),dp:t.data("dp"),color:t.data("color"),display_title:t.data("title"),thumbnail:t.data("thumbnail")},function(a){t.html(a),e()})}),jQuery(".eventpost_cal_link").click(function(){var e=jQuery(this).parents(".eventpost_calendar");jQuery(".eventpost_cal_list",e).fadeOut(function(){jQuery(this).remove()}),jQuery.get(eventpost_params.ajaxurl,{action:"EventPostCalendarDate",date:jQuery(this).data("date"),cat:e.data("cat"),mf:e.data("mf"),dp:e.data("dp"),color:e.data("color"),display_title:e.data("title"),thumbnail:e.data("thumbnail")},function(t){e.append('<div class="eventpost_cal_list"><button class="eventpost_cal_close">x</button>'+t+"</div>"),e.find(".eventpost_cal_list").hide(1).fadeIn(500),e.find(".eventpost_cal_close").click(function(){jQuery(this).parent().hide(500).remove()})})})}if("undefined"!=typeof ol){var t=function(e){return eventpost_params.maptiles[e].urls_retina&&ep_retina},a=function(e,t){jQuery(ep_pop_elements[e]).hide(0),view=ep_maps[e].getView();var a=t.getGeometry(),r=a.getCoordinates();view.animate({duration:1e3,center:r});ep_popups[e].setPosition(r),html_output='<a href="'+t.get("link")+'">'+(""!==t.get("thumbnail")&&void 0!==t.get("thumbnail")?'<img src="'+t.get("thumbnail")+'">':"")+"<strong>"+t.get("name")+"</strong><br><time>"+t.get("date")+"</time><br><address>"+t.get("address")+"</address>"+(""!==t.get("desc")&&void 0!==t.get("desc")?"<p>"+t.get("desc")+"</p>":"")+"</a>",jQuery(ep_pop_elements[e]).delay(500).html(html_output).show(500)};ep_maps=[],ep_vectorSources=[],ep_pop_elements=[],ep_popups=[],ep_features=[],ep_icons=[],ep_proj_source=new ol.proj.Projection({code:"EPSG:4326"}),ep_proj_destination=new ol.proj.Projection({code:"EPSG:900913"}),ep_interactions=eventpost_params.map_interactions,ep_retina=window.retina||window.devicePixelRatio>1.5,jQuery("a.event_link.gps").click(function(){if(void 0!==jQuery(this).parent().data("latitude")&&void 0!==jQuery(this).parent().data("longitude")){var e=jQuery(this).parent().data("latitude"),a=jQuery(this).parent().data("longitude"),r=jQuery(this).parent().data("marker"),o=jQuery(this).parent().data("id"),s="event_map"+o,i=new ol.proj.transform([a,e],ep_proj_source,ep_proj_destination);if(0===jQuery("#"+s).length){jQuery(this).parent().append('<div id="'+s+'-wrap"><div id="'+s+'" class="event_map"></div></div>'),jQuery("#"+s+"-wrap").css({height:"400px",margin:"auto",clear:"both"}).animate({height:"toggle"},1),jQuery("#"+s).height(400),ep_vectorSources[s]=new ol.source.Vector,ep_maps[s]=new ol.Map({target:s,layers:[new ol.layer.Tile({source:new ol.source.XYZ({urls:t(eventpost_params.defaulttile)?eventpost_params.maptiles[eventpost_params.defaulttile].urls_retina:eventpost_params.maptiles[eventpost_params.defaulttile].urls,tilePixelRatio:t(eventpost_params.defaulttile)?2:1,attribution:eventpost_params.maptiles[eventpost_params.defaulttile].attribution})}),new ol.layer.Vector({source:ep_vectorSources[s]})],view:new ol.View({center:i,zoom:eventpost_params.zoom})}),ep_maps[s].addControl(new ol.control.Zoom);var n=new ol.Feature({geometry:new ol.geom.Point(i)});void 0===ep_icons[r]&&(ep_icons[r]=new ol.style.Style({image:new ol.style.Icon({anchor:[16,32],anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:1,src:r})})),n.setStyle(ep_icons[r]),ep_vectorSources[s].addFeature(n)}return jQuery("#"+s+"-wrap").animate({height:"toggle"},1e3,function(){ep_maps[s].getView().setCenter(i)}),!1}}),jQuery(".event_geolist").each(function(){var e=jQuery(this).attr("id"),r="event_map_all"+e,o=jQuery(this).data("width"),s=jQuery(this).data("height"),i=jQuery(this).data("zoom"),n=jQuery(this).data("tile");""===n&&(n=eventpost_params.defaulttile);var p=jQuery(this).data("disabled-interactions"),l='<div id="'+r+'" class="event_map map"></div><div id="'+r+'-popup" class="event_map_popup"></div>';jQuery(this).addClass("event_geolist_parsed");var u=!1;jQuery(this).hasClass("has-list")&&(u=jQuery(this).data("list"),jQuery(".event_item",jQuery(this)).wrapAll('<div class="eventpost-item-list">'),jQuery(".eventpost-item-list a",jQuery(this)).click(function(t){return t.preventDefault(),feature_selector=e+"-"+jQuery(this).parents(".event_item").first().data("id"),console.log(feature_selector),"undefined"!==ep_features[feature_selector]&&a(r,ep_features[feature_selector]),!1})),"below"===u||"right"===u?jQuery(this).prepend(l):jQuery(this).append(l),css={margin:"auto",clear:"both"},"auto"!==o&&(css.width=o),"auto"!==s&&(css.height=s),"left"!==u&&"right"!==u||(css.width="70%"),"above"!==u&&"below"!==u||jQuery(this).css({height:"auto"}),jQuery("#"+r).css(css),ep_vectorSources[r]=new ol.source.Vector,ep_pop_elements[r]=document.getElementById(r+"-popup"),ep_popups[r]=new ol.Overlay({element:ep_pop_elements[r],positioning:"bottom-center",stopEvent:!1}),map_settings={target:r,layers:[new ol.layer.Tile({source:new ol.source.XYZ({urls:t(n)?eventpost_params.maptiles[n].urls_retina:eventpost_params.maptiles[n].urls,tilePixelRatio:t(n)?2:1,attribution:eventpost_params.maptiles[n].attribution})}),new ol.layer.Vector({source:ep_vectorSources[r]})],view:new ol.View({center:[0,0],zoom:isNaN(i)?12:i,maxZoom:18}),overlays:[ep_popups[r]]},ep_maps[r]=new ol.Map(map_settings),ep_maps[r].addControl(new ol.control.ZoomSlider),ep_maps[r].on("click",function(e){var t=ep_maps[r].forEachFeatureAtPixel(e.pixel,function(e,t){return e});t?a(r,t):jQuery(ep_pop_elements[r]).hide(200)});var d=0;jQuery(this).find("address").each(function(){d++;var t=parseFloat(jQuery(this).data("latitude")),a=parseFloat(jQuery(this).data("longitude"));if(jQuery(this).parents(".event_item").first().data("id",d),void 0!==t&&void 0!==a){var o=jQuery(this).parent().parent(),s=jQuery(this).data("marker");jQuery(this).data("id");coords=new ol.proj.transform([a,t],ep_proj_source,ep_proj_destination),obj={geometry:new ol.geom.Point(coords),name:o.find("h5").text(),address:jQuery(this).html(),date:o.find("time").text(),link:o.find("a").attr("href"),desc:o.find(".event_exerpt").html()},o.find("img").length>0&&(obj.thumbnail=o.find("img").attr("src"));var i=e+"-"+d;ep_features[i]=new ol.Feature(obj),void 0===ep_icons[s]&&(ep_icons[s]=new ol.style.Style({image:new ol.style.Icon({anchor:[16,32],anchorXUnits:"pixels",anchorYUnits:"pixels",opacity:1,src:s})})),ep_features[i].setStyle(ep_icons[s]),ep_vectorSources[r].addFeature(ep_features[i])}}),ep_maps[r].getView().fit(ep_vectorSources[r].getExtent(),ep_maps[r].getSize()),!isNaN(i)&&""!==i&&i>0&&ep_maps[r].getView().setZoom(i),m_i=0;var c;for(c in ep_interactions)p.indexOf(c+",")>-1&&ep_maps[r].getInteractions().getArray()[m_i].setActive(!1),m_i++})}else jQuery(".event_geolist").hide();jQuery(".eventpost_calendar").each(function(){var t=jQuery(this);t.html('<img src="'+eventpost_params.imgpath+'cal-loader.gif" class="eventpost_cal_loader"/>'),jQuery.get(eventpost_params.ajaxurl,{action:"EventPostCalendar",date:jQuery(this).data("date"),cat:jQuery(this).data("cat"),mf:jQuery(this).data("mf"),dp:jQuery(this).data("dp"),color:jQuery(this).data("color"),display_title:jQuery(this).data("title"),thumbnail:jQuery(this).data("thumbnail")},function(a){t.html(a),e()})})})},13:function(e,t){}});
>>>>>>> 5.3
